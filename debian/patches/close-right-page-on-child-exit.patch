Description: Close the right page when a child process exits
 When a child process exits, sakura closes the current notebook page,
 which can be different from the page in which the child process was
 actually running.
Author: Thibaut Girka <thib@sitedethib.com>
Forwarded: yes
Bug: 
Debian-Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=668988

--- sakura-3.0.3.orig/src/sakura.c
+++ sakura-3.0.3/src/sakura.c
@@ -604,7 +604,8 @@ sakura_child_exited (GtkWidget *widget,
 	gint status, page, npages;
 	struct terminal *term;
 
-	page = gtk_notebook_get_current_page(GTK_NOTEBOOK(sakura.notebook));
+	page = gtk_notebook_page_num(GTK_NOTEBOOK(sakura.notebook),
+				gtk_widget_get_parent(widget));
 	npages = gtk_notebook_get_n_pages(GTK_NOTEBOOK(sakura.notebook));
 	term = sakura_get_page_term(sakura, page);
 
